(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{621:function(e,t,n){var content=n(669);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("f7bccfe4",content,!0,{sourceMap:!1})},622:function(e,t,n){var content=n(671);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("0fd7dd3b",content,!0,{sourceMap:!1})},623:function(e,t,n){var content=n(673);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("4b19394a",content,!0,{sourceMap:!1})},624:function(e,t,n){var content=n(675);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("d483f992",content,!0,{sourceMap:!1})},666:function(e,t,n){var o=n(4);o(o.S,"Object",{is:n(247)})},667:function(e,t){function n(e){return"function"==typeof e.value||(console.warn("[Vue-click-outside:] provided expression",e.expression,"is not a function."),!1)}function o(e){return void 0!==e.componentInstance&&e.componentInstance.$isServer}e.exports={bind:function(e,t,r){function c(t){if(r.context){var n=t.path||t.composedPath&&t.composedPath();n&&n.length>0&&n.unshift(t.target),e.contains(t.target)||function(e,t){if(!e||!t)return!1;for(var i=0,n=t.length;i<n;i++)try{if(e.contains(t[i]))return!0;if(t[i].contains(e))return!1}catch(e){return!1}return!1}(r.context.popupItem,n)||e.__vueClickOutside__.callback(t)}}n(t)&&(e.__vueClickOutside__={handler:c,callback:t.value},!o(r)&&document.addEventListener("click",c),!o(r)&&document.addEventListener("touchstart",c))},update:function(e,t){n(t)&&(e.__vueClickOutside__.callback=t.value)},unbind:function(e,t,n){!o(n)&&document.removeEventListener("click",e.__vueClickOutside__.handler),!o(n)&&document.removeEventListener("touchstart",e.__vueClickOutside__.handler),delete e.__vueClickOutside__}}},668:function(e,t,n){"use strict";n(621)},669:function(e,t,n){var o=n(5)(!1);o.push([e.i,".fade-transform-enter-active[data-v-e678b1c6],.fade-transform-leave-active[data-v-e678b1c6]{transition:all .5s}.fade-transform-enter[data-v-e678b1c6]{opacity:0;transform:translateX(-30px)}.fade-transform-leave-to[data-v-e678b1c6]{opacity:0;transform:translateX(30px)}.mobile-slide-enter-active[data-v-e678b1c6],.mobile-slide-leave-active[data-v-e678b1c6]{transition:all .2s ease-in-out}.mobile-slide-enter[data-v-e678b1c6],.mobile-slide-leave-to[data-v-e678b1c6]{transform:translateX(100%)}.search-slide-enter-active[data-v-e678b1c6],.search-slide-leave-active[data-v-e678b1c6]{transition:all .35s ease-in-out}@media (max-width:1023px){.search-slide-enter-active[data-v-e678b1c6],.search-slide-leave-active[data-v-e678b1c6]{transition:all .25s ease-in-out}}.search-slide-enter[data-v-e678b1c6],.search-slide-leave-to[data-v-e678b1c6]{transform:translateX(100%)}.fade-enter-active[data-v-e678b1c6],.fade-leave-active[data-v-e678b1c6]{transition:opacity .3s}.fade-enter[data-v-e678b1c6],.fade-leave-active[data-v-e678b1c6]{opacity:0}.fade-move[data-v-e678b1c6]{transition:transform .3s}.fade-leave-active[data-v-e678b1c6]{position:absolute}.list-slide-enter[data-v-e678b1c6],.list-slide-leave-to[data-v-e678b1c6]{opacity:0;transform:translateY(30px)}.list-slide-leave-active[data-v-e678b1c6]{width:100%;position:absolute}.slide-up-enter-active[data-v-e678b1c6]{transition:all .3s ease .1s}.slide-up-leave-active[data-v-e678b1c6]{transition:all .3s ease}.slide-up-enter[data-v-e678b1c6],.slide-up-leave-active[data-v-e678b1c6]{transform:translateY(-20px);opacity:0}.slide-up-move[data-v-e678b1c6]{transition:all .5s}.editor-container[data-v-e678b1c6]{display:flex;justify-content:space-between;align-items:flex-start}.avatar[data-v-e678b1c6]{display:inline-block;width:36px;height:36px;border-radius:50%;background-color:#eee;line-height:36px;color:#fff}@media (max-width:479px){.avatar[data-v-e678b1c6]{display:none}}.slide-wrapper[data-v-e678b1c6]{position:relative}.message-container .comment-wrapper[data-v-e678b1c6]{width:100%}.message-container .slide-wrapper[data-v-e678b1c6]{display:flex;flex-direction:column}.message-container .slide-wrapper .user-item[data-v-e678b1c6]{order:1;margin:5px 0 10px}@media (max-width:767px){.message-container .slide-wrapper .user-item .user-input[data-v-e678b1c6]{width:100%}}@media (max-width:479px){.message-container .slide-wrapper .user-item .user-input[data-v-e678b1c6]{width:calc(100% - 20px)}}.message-container .slide-wrapper .editor-item[data-v-e678b1c6]{order:2}.message-container .slide-wrapper .tools-item[data-v-e678b1c6]{order:3}.comment-wrapper[data-v-e678b1c6]{width:calc(100% - 50px)}@media (max-width:479px){.comment-wrapper[data-v-e678b1c6]{width:100%}}.comment-wrapper .list-slide-item[data-v-e678b1c6]{transition:all .3s ease-in-out}.comment-wrapper .reply-target[data-v-e678b1c6]{box-sizing:border-box;position:relative;margin-bottom:10px;padding:10px;border:1px solid #ccc;border-radius:4px}.comment-wrapper .reply-target .icon-ant-close[data-v-e678b1c6]{display:flex;justify-content:center;align-items:center;position:absolute;top:5px;right:5px;width:30px;height:30px;font-size:16px;cursor:pointer}.comment-wrapper .reply-target .icon-ant-close[data-v-e678b1c6]:hover{color:#ccc}.comment-wrapper .editor[data-v-e678b1c6]{box-sizing:border-box;width:100%;min-height:120px;max-height:300px;padding:10px;font-size:14px;color:#222;border:1px solid #ccc;border-radius:4px;outline:none;overflow-y:auto;font-family:Microsoft Yahei;background-image:url(https://gravatar.ufile.ucloud.com.cn/static/photo/comment-bg.png);background-size:contain;background-repeat:no-repeat;background-position:100%;resize:vertical;text-align:left;background-color:#f4f5f7}.comment-wrapper .editor[data-v-e678b1c6]:empty:before{content:attr(placeholder);position:absolute;left:10px;top:10px;transform-origin:0 0;font-size:14px;pointer-events:none;transition:all .25s}.comment-wrapper .editor[data-v-e678b1c6]:focus,.comment-wrapper .editor[data-v-e678b1c6]:hover{border-color:#029fe9;background-color:#fff}.comment-wrapper .editor[data-v-e678b1c6]:focus:before{content:attr(placeholder);position:absolute;left:10px;top:10px;transform-origin:0 0;pointer-events:none;transition:all .25s;color:#fff;background-color:#029fe9;font-size:16px;padding:0 4px;transform:scale(.75) translateY(-24px);border-radius:3px}.comment-wrapper .user-wrapper[data-v-e678b1c6]{display:flex;justify-content:space-between;align-items:center;font-size:14px}@media (max-width:767px){.comment-wrapper .user-wrapper[data-v-e678b1c6]{flex-direction:column}}.comment-wrapper .user-wrapper .user-input[data-v-e678b1c6]{width:calc(32% - 20px);height:10px;line-height:normal;padding:8px 10px;outline:none;color:#222;white-space:nowrap;border:1px solid #ccc;border-radius:4px;background-color:#fff;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.comment-wrapper .user-wrapper .user-input[data-v-e678b1c6]:focus,.comment-wrapper .user-wrapper .user-input[data-v-e678b1c6]:hover{border-color:#222}@media (max-width:767px){.comment-wrapper .user-wrapper .user-input[data-v-e678b1c6]{width:calc(100% - 20px);margin:3px 5px}}.tools-wrapper[data-v-e678b1c6]{display:flex;justify-content:space-between;align-items:center}.tools-wrapper .tool-item[data-v-e678b1c6]{display:flex;justify-content:center;align-items:center;width:30px;height:30px;cursor:pointer}.tools-wrapper .tool-item[data-v-e678b1c6]:hover{background-color:#fff}.editor-tools[data-v-e678b1c6]{display:flex;justify-content:flex-start;margin:5px 0}.editor-tools>a[data-v-e678b1c6]{position:relative;margin-right:10px}.editor-tools>a[data-v-e678b1c6]:last-child{margin-right:0}.emoji-wrapper[data-v-e678b1c6]{box-sizing:border-box;display:flex;justify-content:flex-start;flex-wrap:wrap;position:absolute;top:30px;left:0;width:200px;padding:10px;background-color:#fff;cursor:default}.emoji-wrapper .emoji-item[data-v-e678b1c6]{display:flex;justify-content:center;align-items:center;box-sizing:border-box;font-size:16px;width:36px;height:36px}.emoji-wrapper .emoji-item[data-v-e678b1c6]:hover{background-color:#fff;cursor:pointer}",""]),e.exports=o},670:function(e,t,n){"use strict";n(622)},671:function(e,t,n){var o=n(5)(!1);o.push([e.i,".comment-item[data-v-1cb33853]{display:flex;justify-content:space-between;align-content:flex-start;margin-bottom:25px}.comment-item[data-v-1cb33853]:last-child{margin-bottom:0}.comment-item .avatar[data-v-1cb33853]{display:inline-block;width:36px;height:36px;border-radius:50%;background-color:#eee;line-height:36px;color:#fff}.comment-item .comment-detail[data-v-1cb33853]{width:calc(100% - 50px)}.comment-item .comment-detail .nickname[data-v-1cb33853]{text-align:left;font-size:14px;color:#6d757a;font-weight:600}.comment-item .comment-detail .nickname[data-v-1cb33853]:hover{color:#00a1d6;cursor:pointer}.comment-item .comment-detail .nickname .website[data-v-1cb33853]{font-size:16px}.comment-item .comment-detail .content[data-v-1cb33853]{display:flex;align-items:center;min-height:42px;margin:8px 0;font-size:1rem}.comment-item .comment-detail .reply-wrapper[data-v-1cb33853]{box-sizing:border-box;padding:6px 10px;font-size:14px;border:1px solid #ccc;border-radius:4px;background-color:#fff}.comment-item .comment-detail .reply-wrapper .reply-nickname[data-v-1cb33853]{font-weight:600}.comment-item .comment-detail .comment-footer[data-v-1cb33853]{display:flex;justify-content:flex-start;align-items:center;color:#99a2aa;margin-bottom:10px}.comment-item .comment-detail .comment-footer .time[data-v-1cb33853]{font-size:12px}.comment-item .comment-detail .comment-footer .tools[data-v-1cb33853]{margin-left:15px;display:flex;justify-content:flex-start;align-items:center;font-size:12px}.comment-item .comment-detail .comment-footer .tools>i[data-v-1cb33853]{display:flex;justify-content:center;align-items:center;width:30px;height:30px;margin-right:10px;cursor:pointer;font-size:12px}.comment-item .comment-detail .comment-footer .tools>i[data-v-1cb33853]:last-child{margin-right:0}.comment-item .comment-detail .comment-footer .tools>i .like-count[data-v-1cb33853]{margin-left:5px}.comment-item .comment-detail .comment-footer .tools span.replay[data-v-1cb33853]{padding:0 5px;border-radius:4px;margin-right:15px;cursor:pointer;display:inline-block}.comment-item .comment-detail .comment-footer .tools span.replay[data-v-1cb33853]:hover{color:#00a1d6;background:#e5e9ef}.comment-item .comment-detail .comment-footer .tools .is-like[data-v-1cb33853]{color:red}.comment-item .comment-detail .split[data-v-1cb33853]{box-sizing:border-box;width:100%;height:1px;margin-top:15px;background-color:#ccc}",""]),e.exports=o},672:function(e,t,n){"use strict";n(623)},673:function(e,t,n){var o=n(5)(!1);o.push([e.i,".comment-list-wrapper[data-v-6e41f00d]{margin-top:25px}",""]),e.exports=o},674:function(e,t,n){"use strict";n(624)},675:function(e,t,n){var o=n(5)(!1);o.push([e.i,".page-articleed .el-card[data-v-6d00570f]{background:transparent}.page-articleed .el-card[data-v-6d00570f] .el-card__header{padding:0;background:hsla(0,0%,100%,.56471)}.page-articleed .el-card[data-v-6d00570f] .el-card__header>div{padding:30px 0;height:100%}.page-articleed .el-card[data-v-6d00570f] .el-card__header h1{background:hsla(0,0%,95.3%,.50196);line-height:40px;text-align:center;color:#333;border-left:5px solid #1bc3fb;font-size:18px}.page-articleed .el-card[data-v-6d00570f] .el-card__header p{text-align:center;margin-top:10px}.page-articleed .el-card[data-v-6d00570f] .el-card__header p span{color:#fff;font-size:14px}.page-articleed .el-card[data-v-6d00570f] .el-card__body{background:#fff;padding:30px}.page-articleed .articleed-info[data-v-6d00570f]{width:100%}.page-articleed .articleed-info .el-col[data-v-6d00570f]{display:flex;justify-content:center}.page-articleed .articleed-info dl[data-v-6d00570f]{overflow:hidden}.page-articleed .articleed-info dl dd[data-v-6d00570f]{float:left;margin-right:20px;height:36px;line-height:1}.page-articleed .articleed-info dl dd a[data-v-6d00570f]{line-height:36px;color:#222;vertical-align:middle}.page-articleed .articleed-info dl dd i[data-v-6d00570f]{font-size:16px;color:#222;vertical-align:middle}.page-articleed .toc-aside[data-v-6d00570f]{position:fixed;left:100px;top:200px;width:120px;overflow:hidden;background:#fff;padding:15px;border-radius:10px}.page-articleed .toc-aside h2[data-v-6d00570f]{padding-bottom:10px;font-size:16px}.page-articleed .toc-aside ol[data-v-6d00570f]{padding-left:15px}.page-articleed .toc-aside ol li[data-v-6d00570f]{cursor:pointer;line-height:28px}.page-articleed .toc-aside ol li a[data-v-6d00570f]{color:rgba(34,34,34,.56471)}.page-articleed .toc-aside ol li a[data-v-6d00570f]:hover{color:#222}.page-articleed .toc-aside ol li a.on[data-v-6d00570f]{color:#409eff}.page-articleed .post-footer[data-v-6d00570f]{margin-top:30px;padding:15px 0;border-top:1px dashed #ddd;border-bottom:1px dashed #ddd;overflow:hidden}.page-articleed .post-footer .footer-tags[data-v-6d00570f]{float:left}.page-articleed .post-footer .footer-tags span a[data-v-6d00570f]{font-size:12px;line-height:16px;letter-spacing:.05em;color:#151c3d;margin-left:5px}.page-articleed .post-footer .footer-like[data-v-6d00570f]{float:right;text-align:center;transition:background .5s;cursor:pointer}.page-articleed .post-footer .footer-like i[data-v-6d00570f]{font-size:16px}.page-articleed .post-footer .footer-like span[data-v-6d00570f]{font-size:14px;line-height:14px;color:#151c3d}.page-articleed section.post-btns[data-v-6d00570f]{margin-top:15px;overflow:hidden}.page-articleed section.post-btns .last-post[data-v-6d00570f]{float:left}.page-articleed section.post-btns .next-post[data-v-6d00570f]{float:right}",""]),e.exports=o},680:function(e,t,n){"use strict";n.r(t);n(27),n(19),n(24),n(39),n(40),n(33),n(12),n(23),n(43),n(44),n(45);var o=n(2),r=n(11),c=(n(10),n(76),n(62),n(246),n(142)),l=n(95),d=n(144),m=function(e){return e&&l.a.validateEmail(e)?d.a.url(e,{protocol:"https"}):""},f=(n(666),n(56),n(105),n(54),n(55),n(248)),v=n(667),h=n.n(v),x=n(0).default.prototype.$isServer,w=(function(){if(!x&&document.addEventListener);}(),function(){if(!x&&document.removeEventListener);}(),function(element){var e=0,t=element.ownerDocument||element.document,n=t.defaultView||t.parentWindow;if(n.getSelection().rangeCount>0){var o=n.getSelection().getRangeAt(0),r=o.cloneRange();r.selectNodeContents(element),r.setEnd(o.endContainer,o.endOffset),e=r.toString().length}return e}),_=["😃","😂","😅","😉","😌","😔","😓","😘","😡","😭","😱","😳","😵","🌚","👍","👎","💪","🌹","💊"],k={directives:{ClickOutside:h.a},props:{isShowReplyContent:{type:Boolean,default:!1},isMessageEditor:{type:Boolean,default:!1},placeholder:{type:String,default:"千生百世，缘起缘灭，皆已注定..."}},data:function(){return{flag:!1,isShowEmoji:!1,contentText:"",contentHtml:"",form:{nickname:"",content:"",email:"",website:""},reply:{replyNickname:"",replyContent:""},emojiList:_,cursorPosition:0}},computed:{avatar:function(){return m(this.form.email)}},created:function(){var e=this;this.debouncedSend=Object(f.debounce)(1e3,!0,(function(){e.send()}));var t=window.localStorage.getItem("USER");t&&(t=JSON.parse(t),this.form.nickname=t.nickname||"",this.form.email=t.email||"",this.form.website=t.website||"")},methods:{resetField:function(){this.form.content="",this.contentText="",this.contentHtml="",this.$refs.editContent.innerHTML="",this.$refs.editContent.innerText="",this.cursorPosition=0},closeReplyContent:function(){this.$emit("closeReplyContent")},contentChange:function(){var html=this.$refs.editContent.innerHTML,text=this.$refs.editContent.innerText;Object.is(html,this.comemntContentHtml)||(this.contentHtml=html),Object.is(text,this.comemntContentText)||(this.contentText=text),this.cursorPosition=w(this.$refs.editContent)},getCursorPosition:function(){this.cursorPosition=w(this.$refs.editContent)},send:function(){this.contentChange();var e=this.getInValidMsg();if(e)this.$message.warning(e);else{var t={nickname:this.form.nickname,email:this.form.email,website:this.form.website};window.localStorage.setItem("USER",JSON.stringify(t)),this.$emit("send",this.form)}},getInValidMsg:function(){if(this.form.content=this.contentText,!this.isMessageEditor){if(!this.form.email)return"邮箱不能为空";if(!1===l.a.validateEmail(this.form.email))return"请填写正确的email格式"}if(this.form.website&&!1===l.a.validateUrl(this.form.website))return"请填写正确的url格式";if(!this.form.content||!this.form.content.replace(/\s/g,""))return this.form.content.length>1e3||this.form.content.split("\n").length>30?"".concat(this.isMessageEditor?"留言":"评论","内容不能超过1000个字且控制在30行以内"):this.isMessageEditor?"留言内容不能为空":"评论内容不能为空";if(this.isMessageEditor){if(this.form.nickname&&this.form.nickname.length>32)return"昵称不能超过32个字符"}else if(!this.form.nickname||this.form.nickname.length>32)return"昵称不能为空且长度不能超过32个字符";return!1},insertContent:function(e){var t={image:{start:"![",end:"]()"},link:{start:"[",end:"]()"},code:{start:"\n```\n",end:"\n```"}};t[e]&&this.updateEditContent(t[e]),this.focusSelection(this.$refs.editContent)},focusSelection:function(e){if(window.getSelection){e.focus();var t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){var n=document.selection.createRange();n.moveToElementText(e),n.collapse(!1),n.select()}},insertEmoji:function(e){var t=this.$refs.editContent,text=t.innerText;t.innerText=text.slice(0,this.cursorPosition)+"".concat(e)+text.slice(this.cursorPosition,text.length),function(element,e){var t=document.createRange();if(!(element.firstChild.length<e)){t.setStart(element.firstChild,e),t.setEnd(element.firstChild,e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}}(t,this.cursorPosition+2),this.cursorPosition=w(t)+2,this.contentChange()},updateEditContent:function(e){var t=e.start,n=void 0===t?"":t,o=e.end,r=void 0===o?"":o;if(n||r){var c=this.$refs.editContent,l=(window.getSelection||document.getSelection)().toString(),d=c.innerText;if(l){var m=d.replace(l,n+l+r);c.innerText=m}else c.innerText=c.innerText+=n+r}}}},y=(n(668),n(3)),C=Object(y.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-container",class:{"message-container":e.isMessageEditor}},[e.isMessageEditor||e.flag?e._e():n("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:e.form.nickname||"匿名用户"},on:{load:function(t){e.flag=!1},error:function(t){e.flag=!0}}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.flag,expression:"flag"}],staticClass:"avatar",style:{backgroundColor:"green"}},[e._v(e._s(e.form.nickname?e.form.nickname.slice(0,1):"匿"))]),e._v(" "),n("section",{staticClass:"comment-wrapper"},[n("transition-group",{staticClass:"slide-wrapper",attrs:{tag:"div",name:"list-slide"}},[n("section",{key:2,staticClass:"list-slide-item editor-item"},[n("div",{ref:"editContent",staticClass:"editor",attrs:{contenteditable:"true",placeholder:e.placeholder},on:{keyup:e.contentChange,click:e.getCursorPosition}})]),e._v(" "),n("section",{key:3,staticClass:"list-slide-item tools-wrapper tools-item"},[n("div",{staticClass:"editor-tools"},[n("a",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){e.isShowEmoji=!1},expression:"() => {isShowEmoji = false}"}],staticClass:"tool-item",on:{click:function(t){e.isShowEmoji=!0}}},[n("i",{staticClass:"iconfont icon-biaoqing"}),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowEmoji,expression:"isShowEmoji"}],staticClass:"emoji-wrapper"},e._l(e.emojiList,(function(t,o){return n("li",{key:o,staticClass:"emoji-item",on:{click:function(n){return n.stopPropagation(),e.insertEmoji(t)}}},[e._v("\n                "+e._s(t)+"\n              ")])})),0)]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:function(t){return e.insertContent("image")}}},[n("i",{staticClass:"iconfont icon-tupian"})]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:function(t){return e.insertContent("link")}}},[n("i",{staticClass:"iconfont icon-lianjie"})]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:function(t){return e.insertContent("code")}}},[n("i",{staticClass:"iconfont icon-code"})])]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:e.debouncedSend}},[n("i",{staticClass:"iconfont icon-send"})])]),e._v(" "),n("div",{key:4,staticClass:"list-slide-item user-item"},[n("section",{key:"4",staticClass:"user-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nickname,expression:"form.nickname"}],staticClass:"user-input",attrs:{maxlength:"32",required:!e.isMessageEditor,name:"text",type:"text",placeholder:e.isMessageEditor?"昵称（非必填）":"昵称（必填）"},domProps:{value:e.form.nickname},on:{input:function(t){t.target.composing||e.$set(e.form,"nickname",t.target.value)}}}),e._v(" "),e.isMessageEditor?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"user-input",attrs:{required:!e.isMessageEditor,name:"email",type:"email",placeholder:"邮箱（必填）"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),e.isMessageEditor?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.website,expression:"form.website"}],staticClass:"user-input",attrs:{name:"url",type:"url",placeholder:"个人网站（完整域名，非必填）"},domProps:{value:e.form.website},on:{input:function(t){t.target.composing||e.$set(e.form,"website",t.target.value)}}})])])])],1)])}),[],!1,null,"e678b1c6",null).exports;function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O={components:{CommentEditor:C},props:{comments:{type:Array,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{likeComments:[]}},created:function(){this.getLikeComments()},methods:{randomRgbColor:function(){var e=Math.floor(256*Math.random()),g=Math.floor(256*Math.random()),b=Math.floor(256*Math.random());return"rgb(".concat(e,",").concat(g,",").concat(b,")")},hide:function(e){e.flag=!0,this.$forceUpdate()},isLike:function(e){return this.likeComments.includes(e)},reply:function(e){var t=this;this.$store.commit("article/setCommentShowReplay",e.id),this.$nextTick((function(){console.log(t.$refs.replayEditor[0].insertContent())}))},sendReplay:function(e,t){var data=j(j({},e),{},{parentId:t.id,articleId:t.article_id});console.log(data),this.$emit("reply",data)},gravatar:function(e){return m(e)},likeComment:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.likeComments.includes(e.id)){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.$store.dispatch("article/likeComment",e.id);case 5:t.likeComments.push(e.id),window.localStorage.setItem("LIKE_COMMENTS",JSON.stringify(t.likeComments)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},getLikeComments:function(){this.likeComments=JSON.parse(window.localStorage.getItem("LIKE_COMMENTS")||"[]")}}},E=(n(670),{components:{CommentEditor:C,CommentList:Object(y.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"comment-list"},[e._l(e.comments,(function(t){return n("li",{key:t.id,staticClass:"comment-item"},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!comment.flag"}],staticClass:"avatar",attrs:{src:e.gravatar(t.user_email),alt:t.user_nickname||"匿名用户"},on:{error:function(n){return e.hide(t)}}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"comment.flag"}],staticClass:"avatar",style:{backgroundColor:e.randomRgbColor()}},[e._v(e._s(t.user_nickname.slice(0,1)))]),e._v(" "),n("section",{staticClass:"comment-detail markdown"},[n("div",{staticClass:"nickname"},[n("span",[e._v(e._s(t.user_nickname))])]),e._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:e._s(t.content)}}),e._v(" "),t.parent_id?n("section",{staticClass:"reply-wrapper markdown"},[t.replyName?n("div",{staticClass:"reply-nickname"},[e._v("@"+e._s(t.replyName)+":")]):e._e(),e._v(" "),n("div",{domProps:{innerHTML:e._s(t.replyContent)}})]):e._e(),e._v(" "),n("footer",{staticClass:"comment-footer"},[n("time",{staticClass:"time",attrs:{datetime:e._f("filterDate")(t.createdAt)}},[e._v(e._s(e._f("filterDate")(t.createdAt,"YYYY-MM-DD HH:mm")))]),e._v(" "),n("div",{staticClass:"tools"},[n("i",{staticClass:"iconfont icon-good",class:{"is-like":e.isLike(t.id)},on:{click:function(n){return e.likeComment(t)}}},[n("span",{staticClass:"like-count"},[e._v(e._s(t.like_count))])]),e._v(" "),n("span",{staticClass:"replay",on:{click:function(n){return e.reply(t)}}},[e._v("回复")])])]),e._v(" "),t.showReplay?n("comment-editor",{ref:"replayEditor",refInFor:!0,attrs:{placeholder:"回复："+t.user_nickname},on:{send:function(n){return e.sendReplay(n,t)}}}):e._e(),e._v(" "),n("div",{staticClass:"split"})],1)])})),e._v(" "),e.loading?n("loading"):e._e(),e._v(" "),e.loading||e.comments.length?e._e():n("div",[e._v("还没有评论 /(ㄒoㄒ)/~~")])],2)}),[],!1,null,"1cb33853",null).exports},props:{comments:{type:Array,default:function(){return[]}},articleId:{type:String},loading:{type:Boolean,default:!1}},data:function(){return{parentId:0}},methods:{onReply:function(data){console.log(data),this.onSend(data,!0)},closeReply:function(){this.$refs.editor.reply={nickname:"",content:""},this.$refs.editor.resetField()},onSend:function(data,e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o={article_id:t.articleId,content:data.content,user_email:data.email,user_nickname:data.nickname,user_url:data.website,parent_id:data.parentId},t.articleId){n.next=3;break}return n.abrupt("return");case 3:if(!e){n.next=18;break}if(o.parent_id){n.next=6;break}return n.abrupt("return");case 6:return n.prev=6,n.next=9,t.$store.dispatch("article/replyComment",o);case 9:n.sent.data.result&&(t.closeReply(),t.$emit("createCommentSuccess")),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(6),console.log(n.t0);case 16:n.next=28;break;case 18:return n.prev=18,n.next=21,t.$store.dispatch("article/createComment",o);case 21:n.sent.data.result&&(t.$refs.editor.resetField(),t.$emit("createCommentSuccess")),n.next=28;break;case 25:n.prev=25,n.t1=n.catch(18),console.log(n.t1);case 28:case"end":return n.stop()}}),n,null,[[6,13],[18,25]])})))()}}}),T=(n(672),Object(y.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-container"},[n("comment-editor",{ref:"editor",on:{closeReplyContent:e.closeReply,send:e.onSend}}),e._v(" "),n("div",{staticClass:"comment-list-wrapper"},[n("comment-list",{attrs:{comments:e.comments,loading:e.loading},on:{reply:e.onReply}})],1)],1)}),[],!1,null,"6e41f00d",null).exports),$=n(72);function M(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function L(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var R={scrollToTop:!0,components:{Comment:T},data:function(){return{code:"",menuData:[],menuState:"",articleLike:0,likeArticles:[],id:"",loading:!1}},head:function(){return{title:this.article.title}},computed:I(I({},Object($.b)({article:function(e){var article=e.article.article;return article?(this.articleLike=article.like_count,article):{}},comments:function(e){return e.article.comments}})),{},{markedContent:function(){return this.article.content?Object(c.a)(this.article.content):""},isLike:function(){return this.likeArticles.includes(this.id)}}),fetch:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,o=e.params,t.next=3,n.dispatch("article/getArticleDetail",{id:o.id});case 3:return t.next=5,n.dispatch("article/getComments",{articleId:o.id});case 5:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;this.$nextTick((function(){e.id=e.$route.params.id,e.getAPs(),e.getLikeArticles()}))},methods:{getComments:function(){console.log(2323),this.$store.dispatch("article/getComments",{articleId:this.id})},giveAlike:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isLike){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.$store.dispatch("article/likeArticle",e);case 4:n.sent&&(t.articleLike++,t.likeArticles.push(e),window.localStorage.setItem("LIKE_ARTICLES",JSON.stringify(t.likeArticles)));case 6:case"end":return n.stop()}}),n)})))()},getLikeArticles:function(){this.likeArticles=JSON.parse(window.localStorage.getItem("LIKE_ARTICLES")||"[]")},getAPs:function(){var e=this,t=["H1","H2","H3","H4"],n=[],o=0;if(this.$refs.markdown.childNodes.forEach((function(e){t.includes(e.nodeName)&&n.push({type:e.nodeName,txt:e.getAttribute("id"),offsetTop:e.offsetTop,heading:"#heading-".concat(o++)})})),this.menuData=n,this.menuState=n.length?n[0].txt:"",this.$store.commit("setTocList",n),this.$store.commit("setTocState",this.menuState),this.checkMenuScroll(),this.$route.hash){var r=this.menuData.find((function(t){return t.heading===e.$route.hash}));this.scrollPage(r)}else document.querySelector(".layout-default").scrollTo(0,0)},checkMenuScroll:function(){var e=this,t=document.querySelector(".layout-default");t.addEventListener("scroll",(function(){var n,o=t.scrollTop,r=e.menuData.length?e.menuData[0].txt:"",c=M(e.menuData);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(!(o>=l.offsetTop))break;r=l.txt}}catch(e){c.e(e)}finally{c.f()}t.clientHeight+o===t.scrollHeight&&(r=e.menuData.length?e.menuData[e.menuData.length-1].txt:""),r!==e.menuState&&(e.menuState=r,e.$store.commit("setTocState",r))}))},scrollPage:function(e){var t=this,n=document.querySelector(".layout-default"),o=window.setInterval((function(){var r=n.scrollTop;r>e.offsetTop?n.scrollTo(0,r-Math.ceil((r-e.offsetTop)/5)):r<e.offsetTop?n.clientHeight+r===n.scrollHeight?(t.menuState=e.txt,t.$store.commit("setTocState",e.txt),window.clearInterval(o)):n.scrollTo(0,r+Math.ceil((e.offsetTop-r)/5)):window.clearInterval(o)}),16)}}},A=(n(674),Object(y.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"scroll",staticClass:"page-articleed",attrs:{id:"page_articleed"}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("h1",[e._v(e._s(e.article.title))]),e._v(" "),n("el-row",{staticClass:"articleed-info"},[n("el-col",{attrs:{span:24}},[n("dl",[n("dd",{attrs:{span:5}},[n("i",{staticClass:"iconfont icon-rili"}),e._v(" "),n("a",[e._v(e._s(e._f("filterDate")(e.article.date)))])]),e._v(" "),n("dd",{attrs:{span:3}},[n("i",{staticClass:"iconfont icon-comment"}),e._v(" "),n("a",[e._v(e._s(e.article.comment)+"条评论")])]),e._v(" "),n("dd",{attrs:{span:3}},[n("i",{staticClass:"iconfont icon-read"}),e._v(" "),n("a",[e._v(e._s(e.article.views)+"阅读")])]),e._v(" "),n("dd",{attrs:{span:3}},[n("i",{staticClass:"iconfont icon-good"}),e._v(" "),n("a",[e._v(e._s(e.articleLike)+"人点赞")])]),e._v(" "),n("dd",{attrs:{span:3}},[n("i",{staticClass:"iconfont icon-user"}),e._v(" "),n("a",[e._v("罗小黑")])])])])],1)],1),e._v(" "),n("div",[n("p",[e._v(e._s(e.article.description))])]),e._v(" "),n("article",{directives:[{name:"show",rawName:"v-show",value:e.markedContent,expression:"markedContent"}],ref:"markdown",staticClass:"markdown",domProps:{innerHTML:e._s(e.markedContent)}}),e._v(" "),n("footer",{staticClass:"post-footer"},[n("div",{staticClass:"footer-tags"},[n("i",{staticClass:"iconfont icon-shengqian"}),e._v(" "),e._l(e.article.labels,(function(t){return n("span",{key:t.id},[n("nuxt-link",{attrs:{to:"/category/"+t.name+"/"+t.id}},[e._v(e._s(t.name))])],1)}))],2),e._v(" "),n("div",{staticClass:"footer-like",on:{click:function(t){return e.giveAlike(e.article.id)}}},[n("i",{staticClass:"iconfont",class:e.isLike?"icon-good-fill":"icon-good",style:{color:e.isLike?"red":""}}),e._v(" "),n("span",[e._v(e._s(e.articleLike))])])]),e._v(" "),n("section",{staticClass:"post-btns"},[e.article.last_id?n("nuxt-link",{staticClass:"last-post",attrs:{to:"/detailed/"+e.article.last_id}},[n("el-button",{attrs:{plain:"",icon:"el-icon-arrow-left"}},[e._v("\n          上一篇\n        ")])],1):e._e(),e._v(" "),e.article.next_id?n("nuxt-link",{staticClass:"next-post",attrs:{to:"/detailed/"+e.article.next_id}},[n("el-button",{attrs:{plain:""}},[e._v("\n          下一篇\n          "),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1):e._e()],1)]),e._v(" "),n("el-card",{staticStyle:{"margin-top":"15px","text-align":"center"}},[n("div",{ref:"commentArea",staticClass:"article-container comment-container"},[n("div",{staticClass:"content"},[n("div",{staticClass:"comment-wrapper"},[n("comment",{attrs:{comments:e.comments,"article-id":e.id,loading:e.loading},on:{createCommentSuccess:e.getComments}})],1)])])])],1)}),[],!1,null,"6d00570f",null));t.default=A.exports}}]);